{"ast":null,"code":"import _slicedToArray from\"/Users/aidanmatchette/quebec/projects/netflix/netflix-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useContext}from'react';import{FirebaseContext}from'../context/firebase';export default function useAuthListener(){var _useState=useState(JSON.parse(localStorage.getItem('authUser'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useContext=useContext(FirebaseContext),firebase=_useContext.firebase;useEffect(function(){var listener=firebase.auth().onAuthStateChanged(function(authUser){if(authUser){localStorage.setItem('authUser',JSON.stringify(authUser));setUser(authUser);}else{localStorage.removeItem('authUser');setUser(null);}});return function(){return listener();};},[]);return{user:user};}","map":{"version":3,"names":["useState","useEffect","useContext","FirebaseContext","useAuthListener","JSON","parse","localStorage","getItem","user","setUser","firebase","listener","auth","onAuthStateChanged","authUser","setItem","stringify","removeItem"],"sources":["/Users/aidanmatchette/quebec/projects/netflix/netflix-clone/src/hooks/use-auth-listener.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react'\nimport { FirebaseContext } from '../context/firebase'\n\n\nexport default function useAuthListener() {\n  const [user, setUser] = useState(\n    JSON.parse(localStorage.getItem('authUser'))\n  )\n  const { firebase } = useContext(FirebaseContext)\n\n  useEffect(() => {\n    const listener = firebase.auth().onAuthStateChanged((authUser) => {\n      if (authUser) {\n        localStorage.setItem('authUser', JSON.stringify(authUser))\n        setUser(authUser)\n      } else {\n        localStorage.removeItem('authUser')\n        setUser(null)\n      }\n    })\n    return () => listener()\n  }, [])\n  return { user } \n}\n"],"mappings":"iJAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,OAASC,eAAT,KAAgC,qBAAhC,CAGA,cAAe,SAASC,gBAAT,EAA2B,CACxC,cAAwBJ,QAAQ,CAC9BK,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAD8B,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eAGA,gBAAqBR,UAAU,CAACC,eAAD,CAA/B,CAAQQ,QAAR,aAAQA,QAAR,CAEAV,SAAS,CAAC,UAAM,CACd,GAAMW,SAAQ,CAAGD,QAAQ,CAACE,IAAT,GAAgBC,kBAAhB,CAAmC,SAACC,QAAD,CAAc,CAChE,GAAIA,QAAJ,CAAc,CACZR,YAAY,CAACS,OAAb,CAAqB,UAArB,CAAiCX,IAAI,CAACY,SAAL,CAAeF,QAAf,CAAjC,EACAL,OAAO,CAACK,QAAD,CAAP,CACD,CAHD,IAGO,CACLR,YAAY,CAACW,UAAb,CAAwB,UAAxB,EACAR,OAAO,CAAC,IAAD,CAAP,CACD,CACF,CARgB,CAAjB,CASA,MAAO,kBAAME,SAAQ,EAAd,EAAP,CACD,CAXQ,CAWN,EAXM,CAAT,CAYA,MAAO,CAAEH,IAAI,CAAJA,IAAF,CAAP,CACD"},"metadata":{},"sourceType":"module"}